<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stylist Dashboard | Gadis Salon</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link rel="stylesheet" href="css/style.css">
    <!-- FontAwesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="dashboard-body">
    <div class="dashboard-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="stylist-dashboard.html" class="logo">Gadis Salon</a>
            </div>
            <nav class="sidebar-nav">
                <a href="#schedule" class="nav-link active"><i class="fas fa-calendar-alt"></i><span>My Schedule</span></a>
                <a href="#bookings" class="nav-link"><i class="fas fa-book-open"></i><span>New Bookings</span></a>
                <a href="#inventory" class="nav-link"><i class="fas fa-boxes-stacked"></i><span>Inventory</span></a>
                <a href="#orders" class="nav-link"><i class="fas fa-receipt"></i><span>Product Orders</span></a>
                <a href="#profile" class="nav-link"><i class="fas fa-user-edit"></i><span>My Profile</span></a>
                <a href="#timeoff" class="nav-link"><i class="fas fa-user-clock"></i><span>Time Off</span></a> 
                <a href="#support" class="nav-link"><i class="fas fa-headset"></i><span>Support</span></a>
                <a href="#" id="logout-button"><i class="fas fa-sign-out-alt"></i><span>Logout</span></a>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content fade-in-up">
            <header class="dashboard-header">
                <button class="hamburger-menu" id="hamburger-menu">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 id="page-title">My Schedule</h1>
                <p id="page-subtitle">Here are your upcoming appointments.</p>
            </header>

            <div id="content-area">
                <!-- Schedule Page Content (Default) -->
                <section id="schedule-page" class="dashboard-page fade-in-up">
                    <!-- NEW: Use a container for cards -->
                    <div id="appointments-container" class="card-grid fade-in-up">
                        <p>Loading schedule...</p>
                    </div>
                </section>

                <!-- New Bookings Page -->
                <section id="bookings-page" class="dashboard-page" style="display: none;">
                    <!-- NEW: Use a container for cards -->
                    <div id="new-bookings-container" class="card-grid fade-in-up">
                        <p>Loading new requests...</p>
                    </div>
                </section>
                
                <!-- Inventory Page -->
                <section id="inventory-page" class="dashboard-page fade-in-up" style="display: none;">
                    <!-- CHANGE: Replaced the table with a grid container -->
                    <div id="inventory-container" class="product-grid">
                        <!-- Product cards will be loaded here from Firestore -->
                    </div>
                </section>

                <!-- Product Orders Page -->
                <section id="orders-page" class="dashboard-page fade-in-up" style="display: none;">
                    <!-- CHANGE: Replaced the table with a card grid -->
                    <div id="orders-container" class="card-grid fade-in-up">
                        <!-- Order cards will be loaded here -->
                    </div>
                </section>

                <!-- NEW: Time Off Page -->
                 <section id="timeoff-page" class="dashboard-page fade-in-up" style="display: none;">
                    <div class="page-actions">
                         <button id="request-timeoff-btn" class="btn"><i class="fas fa-plus"></i> Request Time Off</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Reason</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="timeoff-requests-container">
                                <!-- Time off requests will be loaded here -->
                                <tr><td colspan="4">Loading requests...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <!-- END NEW Time Off Page -->


                <!-- Profile Page -->
                <section id="profile-page" class="dashboard-page fade-in-up" style="display: none;">
                    <div class="profile-form-container fade-in-up">
                        <!-- ADD THIS PROFILE PICTURE SECTION -->
                        <div class="profile-picture-container">
                            <img src="https://placehold.co/150x150/D67A84/FFFFFF?text=G" alt="Profile Picture" id="profile-img">
                            <label for="profile-picture-upload" class="upload-btn">
                                <i class="fas fa-camera"></i>
                            </label>
                            <input type="file" id="profile-picture-upload" accept="image/*" style="display: none;">
                            <button id="remove-picture-btn" class="remove-btn">&times;</button>
                        </div>

                        <form id="profile-form">
                            <div class="form-group">
                                        <label for="profile-name">Full Name</label>
                                        <input type="text" id="profile-name" name="name">
                                    </div>
                                    <div class="form-group">
                                        <label for="profile-email">Email Address</label>
                                        <input type="email" id="profile-email" name="email" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label for="profile-phone">Phone Number</label>
                                        <input type="tel" id="profile-phone" name="phone">
                                    </div>
                                    <button type="submit" class="btn">Save Changes</button>
                                </form>
                            </div>
                        </section>

                    <!-- Support Page -->
                    <section id="support-page" class="dashboard-page" style="display: none;">
                        <div class="support-layout fade-in-up">
                            <div class="ticket-list">
                                <!-- ADD THIS BUTTON -->
                                <button id="new-ticket-btn" class="btn">Create New Ticket</button>
                                <h3>My Tickets</h3>
                                <div id="ticket-list-container">
                                    <!-- Support tickets loaded from Firestore -->
                                    <p>Loading tickets...</p>
                                </div>
                            </div>
                            <div class="ticket-view">
                                <h3>Conversation</h3>
                                <div id="ticket-conversation-container">
                                    <p>Select a ticket to view the conversation.</p>
                                </div>
                                <!-- ADD THIS CHAT FORM -->
                                <form id="support-chat-form" class="chat-input" style="display: none;">
                                    <input type="text" id="support-chat-input" placeholder="Type your reply..." required>
                                    <button type="submit">Send</button>
                                </form>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>

     <!-- Booking -->
    <div id="booking-modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-service-name">Service Details</h2>
                <button id="modal-close-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="booking-details-grid">
                    <div><strong>Customer:</strong> <span id="modal-customer-name"></span></div>
                    <div><strong>Date:</strong> <span id="modal-booking-date"></span></div>
                    <div><strong>Time:</strong> <span id="modal-booking-time"></span></div>
                </div>
                <hr>
                <div class="chat-interface">
                    <h3>Chat with Customer</h3>
                    <div id="chat-messages" class="chat-messages">
                        <!-- Messages will be loaded here -->
                    </div>
                    <form id="chat-form" class="chat-input">
                        <input type="text" id="chat-message-input" placeholder="Type your message..." required>
                        <button type="submit">Send</button>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-booking-btn" class="action-btn decline">Cancel Booking</button>
                <button id="complete-booking-btn" class="action-btn accept">Complete Booking</button>
            </div>
        </div>
    </div>

    <!-- Product -->
    <div id="product-modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h2 id="product-modal-name">Product Details</h2>
                <button id="product-modal-close-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <img src="https://placehold.co/600x400/F4DCD6/333333?text=Product" alt="Product Image" id="product-modal-img" class="product-modal-image">
                <h3>Variants & Stock</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Size</th>
                                <th>Price</th>
                                <th>Stock Remaining</th>
                            </tr>
                        </thead>
                        <tbody id="product-modal-variants-table">
                            <!-- Variant details will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ADD THIS NEW MODAL FOR ORDER DETAILS -->
    <div id="order-details-modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h2 id="order-modal-title">Order Details</h2>
                <button id="order-modal-close-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="booking-details-grid">
                    <div><strong>Customer:</strong> <span id="order-modal-customer"></span></div>
                    <div><strong>Total Price:</strong> <span id="order-modal-total"></span></div>
                </div>
                <h3>Items in this Order</h3>
                <div id="order-modal-items-list" class="order-items-list">
                    <!-- Items will be loaded here -->
                </div>
            </div>
            <div id="order-modal-footer" class="modal-footer">
                <!-- Action buttons will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- ADD THIS NEW MODAL FOR CREATING A TICKET -->
    <div id="new-ticket-modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h2>New Support Ticket</h2>
                <button id="new-ticket-modal-close-btn" class="close-btn">&times;</button>
            </div>
            <form id="new-ticket-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="ticket-message">Please describe your issue</label>
                        <textarea id="ticket-message" name="message" required></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn">Send Ticket</button>
                </div>
            </form>
        </div>
    </div>

     <!-- NEW: Time Off Request Modal -->
     <div id="timeoff-request-modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h2>Request Time Off</h2>
                <button id="timeoff-modal-close-btn" class="close-btn">&times;</button>
            </div>
            <form id="timeoff-request-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="timeoff-start-date">Start Date</label>
                        <input type="date" id="timeoff-start-date" name="startDate" required>
                    </div>
                    <div class="form-group">
                        <label for="timeoff-end-date">End Date</label>
                        <input type="date" id="timeoff-end-date" name="endDate" required>
                    </div>
                    <div class="form-group">
                        <label for="timeoff-reason">Reason</label>
                        <textarea id="timeoff-reason" name="reason" rows="3" required placeholder="e.g., Vacation, Sick day, Personal"></textarea>
                    </div>
                    <p id="timeoff-error-msg" style="color: red; text-align: center; margin-top: 1rem;"></p>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn">Submit Request</button>
                </div>
            </form>
        </div>
    </div>
    <!-- END NEW Time Off Request Modal -->

    <!-- NEW: Reason Prompt Modal -->
    <div id="reason-prompt-modal-overlay" class="modal-overlay">
        <div id="reason-prompt-modal" class="modal">
            <div class="modal-header">
                 <h3 id="reason-prompt-title">Provide Reason</h3> <!-- Title -->
                 <button id="reason-prompt-close-btn" class="close-btn">&times;</button>
             </div>
             <div class="modal-body">
                 <p id="reason-prompt-message">Please provide a reason:</p>
                 <div class="form-group">
                     <textarea id="reason-prompt-input" rows="3" required></textarea>
                     <p id="reason-prompt-error" style="color: red; margin-top: 0.5rem;"></p>
                 </div>
             </div>
             <div class="modal-footer" id="reason-prompt-actions">
                 <button id="reason-prompt-cancel-btn" class="btn btn-secondary">Cancel</button>
                 <button id="reason-prompt-submit-btn" class="btn btn-danger">Submit</button> <!-- Default style -->
             </div>
        </div>
    </div>
    <!-- END NEW Reason Prompt Modal -->

    <!-- NEW: Toast Notification Container -->
    <div id="toast-container"></div>

    <!-- NEW: Generic Confirmation Modal -->
    <div id="confirmation-modal-overlay" class="modal-overlay">
        <div id="confirmation-modal" class="modal">
            <h3>Confirmation</h3>
            <p id="confirmation-message">Are you sure?</p>
            <div id="confirmation-modal-actions">
                <button id="confirm-cancel-btn" class="btn btn-secondary">Cancel</button>
                <button id="confirm-proceed-btn" class="btn btn-danger">Proceed</button> <!-- Default class -->
            </div>
        </div>
    </div>
    <!-- END NEW -->
    
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/stylist-dashboard.js"></script>
    <script src="js/script.js"></script>
</body>
</html>

